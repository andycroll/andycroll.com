<head>
  <meta charset="utf-8">
  <meta name="MSSmartTagsPreventParsing" content="true">

  <!-- https://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  {% assign imagebase = page.image.base %}
  {% capture canonical %}{{ site.url }}{% if site.permalink contains '.html' %}{{ page.url }}{% else %}{{ page.url | remove:'index.html' | strip_slash }}{% endif %}{% endcapture %}

  <title>
    {% if page.title %}{{ page.title }} - {% endif %}
    {{ site.title }}
  </title>
  <meta name="description" content="{{ page.description }}">
  {% if page.keywords %}<meta name="keywords" content="{{ page.keywords }}">{% endif %}

  <meta property="og:title" content="{{ page.title }}">
  <meta property="og:description" content="{{ page.description }}">
  <meta property="og:site_name" content="{{ site.title }}">
  {% if page.date %}
    <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
  {% endif %}

  <meta property="og:type" content="article">
  {% if imagebase %}
    <meta property="og:image" content="{{ site.image_url }}/images/{{ imagebase }}.jpg?width=1024">
  {% endif %}
  <link rel="og:url" href="{{ canonical }}">

  <meta name="twitter:creator" content="@andycroll">
  <meta name="twitter:description" content="{{ page.description }}">
  <meta name="twitter:title" content="{{ page.title }}">
  <meta name="twitter:site" content="@andycroll">

  {% if imagebase %}
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="{{ site.image_url }}/images/{{ imagebase }}.jpg?width=1024">
  {% else %}
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="{{ root_url }}/images/andycroll.jpg">
  {% endif %}

  <link rel="canonical" href="{{ canonical }}">

  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <link href="{{ root_url }}/favicon.ico" rel="icon">
  <link href="{{ "/assets/css/app.css" | relative_url }}" media="screen, projection" rel="stylesheet" type="text/css">
  <link
    href="{{ "/assets/css/custom.css" | relative_url }}"
    media="screen, projection"
    rel="stylesheet"
    type="text/css"
  >

  <link href="/index.xml" rel="alternate" title="{{site.title}}" type="application/atom+xml">

  <!-- Schema.org JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "@id": "{{ site.url }}/#person",
    "name": "Andy Croll",
    "url": "{{ site.url }}",
    "image": "{{ site.image_url }}/images/andycroll.jpg",
    "jobTitle": "CTO",
    "worksFor": {
      "@type": "Organization",
      "name": "CoverageBook",
      "url": "https://coveragebook.com"
    },
    "sameAs": [
      "https://twitter.com/andycroll",
      "https://github.com/andycroll",
      "https://ruby.social/@andycroll",
      "https://brightonruby.com",
      "https://rubytshirts.com"
    ],
    "knowsAbout": ["Ruby", "Ruby on Rails", "Software Development", "Conference Organization"]
  }
  </script>

  {% if page.url == '/' %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "@id": "{{ site.url }}/#website",
    "name": "{{ site.title }}",
    "url": "{{ site.url }}",
    "description": "{{ site.description }}",
    "author": { "@id": "{{ site.url }}/#person" },
    "publisher": { "@id": "{{ site.url }}/#person" }
  }
  </script>
  {% endif %}

  {% if page.layout == 'article' %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "@id": "{{ canonical }}#article",
    "headline": {{ page.title | jsonify }},
    "description": {{ page.description | jsonify }},
    "datePublished": "{{ page.date | date_to_xmlschema }}",
    {% if page.last_modified_at %}"dateModified": "{{ page.last_modified_at | date_to_xmlschema }}",{% endif %}
    "author": { "@id": "{{ site.url }}/#person" },
    "publisher": { "@id": "{{ site.url }}/#person" },
    "mainEntityOfPage": { "@id": "{{ canonical }}" },
    "isPartOf": { "@id": "{{ site.url }}/#website" }
    {% if page.image.base %},
    "image": "{{ site.image_url }}/images/{{ page.image.base }}.jpg?width=1200"
    {% endif %}
    {% if page.category %},
    "articleSection": "{{ page.category | capitalize }}"
    {% endif %}
  }
  </script>
  {% endif %}
</head>
