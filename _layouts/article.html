---
layout: default
---
{% if jekyll.environment == 'production' %}
  {% capture image_url_root %}{{site.image_url }}/images/{% endcapture %}
{% else %}
  {% assign image_url_root = '/images/' %}
{% endif %}

{% if page.image %}
  <div class="relative w-screen max-w-7xl left-1/2 -translate-x-1/2 xl:rounded-lg xl:overflow-hidden">
    <picture>
      <img
        sizes="100vw"
        alt="{{ page.image.alt }}"
        src="{{ image_url_root }}{{ page.image.base }}.jpg?blur=80&quality=40"
        srcset="
          {{ image_url_root }}{{ page.image.base }}.jpg?width=1024.jpg 1024w,
          {{ image_url_root }}{{ page.image.base }}.jpg?width=1536 1536w,
          {{ image_url_root }}{{ page.image.base }}.jpg?width=2048 2048w
        "
        class="aspect-4/1 w-full object-cover"
        data-no-lazy
      >
    </picture>

    {% if page.image.credit %}
      <div
        class="absolute top-3 right-3 sm:right-6 rounded bg-white dark:bg-slate-800 py-1 px-2 opacity-50 hover:opacity-100"
      >
        <p class="text-slate-600 dark:text-slate-300 text-xs">
          <small>
            <span class="hidden md:inline">image&nbsp;by</span>
            {% if page.image.source %}
              <a
                href="{{ page.image.source }}"
                class="text-slate-600 dark:text-slate-300 no-underline hover:text-slate-600 dark:hover:text-slate-200 hover:underline"
              >
                {{- page.image.credit -}}
              </a>
            {% else %}
              <span class="text-slate-600 dark:text-slate-300 no-underline">{{ page.image.credit }}</span>
            {% endif %}
          </small>
        </p>
      </div>
    {% endif %}

    <div class="absolute bottom-0 left-[max(0px,calc((min(100vw,80rem)-48rem)/2))] z-20 bg-white dark:bg-slate-900 rounded-tr">
      {% if page.categories contains 'ruby' %}
        <a class="inline-block p-3 pb-0" href="/ruby">
          <img
            src="/images/onerubything-horizontal.svg"
            class="w-auto h-4 sm:h-5 md:h-6 dark:invert"
            alt="One Ruby Thing"
          >
        </a>
      {% endif %}
    </div>
  </div>
{% endif %}

<div class="max-w-3xl mx-auto">
  <h1 class="font-serif text-xl sm:text-2xl md:text-3xl lg:text-4xl pt-3 px-3">
    {% assign titleWords = page.title | split: ' ' %}
    {% for word in titleWords -%}
      {%- if forloop.last %}&nbsp;{% else %}  {% endif -%}
      {{- word -}}
    {%- endfor %}
  </h1>

  <div class="relative">
    <div
      class="
        p-3 pb-0
        prose prose-lg dark:prose-invert
        prose-headings:font-serif prose-headings:font-normal prose-headings:mb-3 prose-headings:mt-4
        prose-p:my-0 prose-p:mb-4
        prose-h1:text-2xl prose-h1:md:text-3xl
        prose-h2:text-xl prose-h2:md:text-2xl prose-h2:mt-10
        prose-h3:text-base prose-h3:text-stone-600 dark:prose-h3:text-stone-300
        prose-a:text-stone-800 dark:prose-a:text-stone-200 hover:prose-a:text-red-800 dark:hover:prose-a:text-red-400 prose-a:decoration-2 prose-a:decoration-red-700 dark:prose-a:decoration-red-500 prose-a:underline-offset-4 prose-a:underline
      "
    >
      {{ page.excerpt }}
    </div>

    <div class="p-3 lg:hidden">
      {% include rubytshirts.html %}
    </div>

    <div
      class="
        p-3 pt-0
        prose prose-lg dark:prose-invert
        prose-headings:font-serif prose-headings:font-normal prose-headings:mb-3 prose-headings:mt-4
        prose-p:my-0 prose-p:mb-4
        prose-h1:text-2xl prose-h1:md:text-3xl
        prose-h2:text-xl prose-h2:md:text-2xl prose-h2:mt-10
        prose-h3:text-base prose-h3:text-stone-600 dark:prose-h3:text-stone-300
        prose-a:text-stone-800 dark:prose-a:text-stone-200 hover:prose-a:text-red-800 dark:hover:prose-a:text-red-400 prose-a:decoration-2 prose-a:decoration-red-700 dark:prose-a:decoration-red-500 prose-a:underline-offset-4 prose-a:underline
      "
    >
      {{ content | remove: page.excerpt }}
    </div>

    <aside class="hidden lg:block lg:absolute lg:top-0 lg:left-full lg:ml-6 lg:w-52">
      <div class="sticky top-4">
        {% include rubytshirts.html %}
      </div>
    </aside>
  </div>

  <div class="mb-10">
    <p class="text-xs text-slate-500 dark:text-slate-400 px-3">
      {% if page.last_modified_at and page.last_modified_at != page.date %}
        Last updated on
        <span class="date">{{ page.last_modified_at | date_to_long_string: 'ordinal', 'US' }}</span>
        &middot;
        Originally published on
        <span class="date">{{ page.date | date_to_long_string: 'ordinal', 'US' }}</span>
      {% else %}
        Published on
        <span class="date">{{ page.date | date_to_long_string: 'ordinal', 'US' }}</span>
      {% endif %}
    </p>
  </div>
</div>
